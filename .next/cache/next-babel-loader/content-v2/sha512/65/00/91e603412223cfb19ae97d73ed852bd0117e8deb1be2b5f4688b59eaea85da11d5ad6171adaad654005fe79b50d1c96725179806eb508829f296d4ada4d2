{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/uesleisuptitz/projetos/nlw4/moveit/src/context/challenges.context.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport challenges from \"../challenges.json\";\nexport var ChallengesContext = /*#__PURE__*/createContext({});\nexport var ChallengesProvider = function ChallengesProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useState = useState(1),\n      level = _useState[0],\n      setLevel = _useState[1];\n\n  var _useState2 = useState(0),\n      experience = _useState2[0],\n      setExperience = _useState2[1];\n\n  var _useState3 = useState(0),\n      challengesCompleteds = _useState3[0],\n      setChallengesCompleteds = _useState3[1];\n\n  var _useState4 = useState(null),\n      activeChallenge = _useState4[0],\n      setActiveChallenge = _useState4[1];\n\n  useEffect(function () {\n    Notification.requestPermission();\n  }, []);\n\n  var startNewChallenge = function startNewChallenge() {\n    var newChallenge = challenges[Math.floor(Math.random() * challenges.length)];\n    setActiveChallenge(newChallenge);\n\n    if (Notification.permission === \"granted\") {\n      new Notification(\"Novo desafio ðŸŽ‰\", {\n        body: \"Valendo \".concat(newChallenge.amount, \"XP!\")\n      });\n    }\n  };\n\n  var resetChallenge = function resetChallenge() {\n    setActiveChallenge(null);\n  };\n\n  var completeChallenge = function completeChallenge() {\n    if (!activeChallenge) return;\n    var amount = activeChallenge.amount;\n    var xp = experience + amount;\n\n    if (xp >= experienceToLevelUp) {\n      setLevel(level + 1);\n      xp = xp - experienceToLevelUp;\n    }\n\n    setExperience(xp);\n    setActiveChallenge(null);\n    setChallengesCompleteds(challengesCompleteds + 1);\n  };\n\n  var experienceToLevelUp = Math.pow((level + 1) * 4, 2);\n  return /*#__PURE__*/_jsxDEV(ChallengesContext.Provider, {\n    value: {\n      level: level,\n      experience: experience,\n      activeChallenge: activeChallenge,\n      challengesCompleteds: challengesCompleteds,\n      levelUp: function levelUp() {\n        return setLevel(level + 1);\n      },\n      startNewChallenge: startNewChallenge,\n      resetChallenge: resetChallenge,\n      experienceToLevelUp: experienceToLevelUp,\n      completeChallenge: completeChallenge\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ChallengesProvider, \"755Zbzhho0lM5K6Um0AMEvCaims=\");\n\n_c = ChallengesProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChallengesProvider\");","map":{"version":3,"sources":["/Users/uesleisuptitz/projetos/nlw4/moveit/src/context/challenges.context.tsx"],"names":["useState","useEffect","createContext","challenges","ChallengesContext","ChallengesProvider","children","level","setLevel","experience","setExperience","challengesCompleteds","setChallengesCompleteds","activeChallenge","setActiveChallenge","Notification","requestPermission","startNewChallenge","newChallenge","Math","floor","random","length","permission","body","amount","resetChallenge","completeChallenge","xp","experienceToLevelUp","pow","levelUp"],"mappings":";;;;;;AAAA,SAASA,QAAT,EAA8BC,SAA9B,QAA+C,OAA/C;AACA,SAASC,aAAT,QAA8B,OAA9B;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AAsBA,OAAO,IAAMC,iBAAiB,gBAAGF,aAAa,CAAC,EAAD,CAAvC;AAEP,OAAO,IAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,OAA2C;AAAA;;AAAA,MAAxCC,QAAwC,QAAxCA,QAAwC;;AAAA,kBACjDN,QAAQ,CAAC,CAAD,CADyC;AAAA,MACpEO,KADoE;AAAA,MAC7DC,QAD6D;;AAAA,mBAEvCR,QAAQ,CAAC,CAAD,CAF+B;AAAA,MAEpES,UAFoE;AAAA,MAExDC,aAFwD;;AAAA,mBAGnBV,QAAQ,CAAC,CAAD,CAHW;AAAA,MAGpEW,oBAHoE;AAAA,MAG9CC,uBAH8C;;AAAA,mBAI7BZ,QAAQ,CAAC,IAAD,CAJqB;AAAA,MAIpEa,eAJoE;AAAA,MAInDC,kBAJmD;;AAM3Eb,EAAAA,SAAS,CAAC,YAAM;AACdc,IAAAA,YAAY,CAACC,iBAAb;AACD,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9B,QAAIC,YAAY,GACdf,UAAU,CAACgB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBlB,UAAU,CAACmB,MAAtC,CAAD,CADZ;AAEAR,IAAAA,kBAAkB,CAACI,YAAD,CAAlB;;AACA,QAAIH,YAAY,CAACQ,UAAb,KAA4B,SAAhC,EAA2C;AACzC,UAAIR,YAAJ,CAAiB,iBAAjB,EAAoC;AAClCS,QAAAA,IAAI,oBAAaN,YAAY,CAACO,MAA1B;AAD8B,OAApC;AAGD;AACF,GATD;;AAWA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BZ,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD,GAFD;;AAIA,MAAMa,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9B,QAAI,CAACd,eAAL,EAAsB;AADQ,QAEtBY,MAFsB,GAEXZ,eAFW,CAEtBY,MAFsB;AAG9B,QAAIG,EAAE,GAAGnB,UAAU,GAAGgB,MAAtB;;AACA,QAAIG,EAAE,IAAIC,mBAAV,EAA+B;AAC7BrB,MAAAA,QAAQ,CAACD,KAAK,GAAG,CAAT,CAAR;AACAqB,MAAAA,EAAE,GAAGA,EAAE,GAAGC,mBAAV;AACD;;AACDnB,IAAAA,aAAa,CAACkB,EAAD,CAAb;AACAd,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAF,IAAAA,uBAAuB,CAACD,oBAAoB,GAAG,CAAxB,CAAvB;AACD,GAXD;;AAaA,MAAMkB,mBAAmB,GAAGV,IAAI,CAACW,GAAL,CAAS,CAACvB,KAAK,GAAG,CAAT,IAAc,CAAvB,EAA0B,CAA1B,CAA5B;AAEA,sBACE,QAAC,iBAAD,CAAmB,QAAnB;AACE,IAAA,KAAK,EAAE;AACLA,MAAAA,KAAK,EAALA,KADK;AAELE,MAAAA,UAAU,EAAVA,UAFK;AAGLI,MAAAA,eAAe,EAAfA,eAHK;AAILF,MAAAA,oBAAoB,EAApBA,oBAJK;AAKLoB,MAAAA,OAAO,EAAE;AAAA,eAAMvB,QAAQ,CAACD,KAAK,GAAG,CAAT,CAAd;AAAA,OALJ;AAMLU,MAAAA,iBAAiB,EAAjBA,iBANK;AAOLS,MAAAA,cAAc,EAAdA,cAPK;AAQLG,MAAAA,mBAAmB,EAAnBA,mBARK;AASLF,MAAAA,iBAAiB,EAAjBA;AATK,KADT;AAAA,cAaGrB;AAbH;AAAA;AAAA;AAAA;AAAA,WADF;AAiBD,CAzDM;;GAAMD,kB;;KAAAA,kB","sourcesContent":["import { useState, ReactNode, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport challenges from \"../challenges.json\";\n\ninterface ChallengesProviderProps {\n  children: ReactNode;\n}\ninterface Challenge {\n  type: \"body\" | \"eye\";\n  description: string;\n  amount: number;\n}\ninterface ChallengesContextData {\n  level: number;\n  experience: number;\n  activeChallenge: Challenge;\n  challengesCompleteds: number;\n  levelUp: () => void;\n  startNewChallenge: () => void;\n  resetChallenge: () => void;\n  completeChallenge: () => void;\n  experienceToLevelUp: number;\n}\n\nexport const ChallengesContext = createContext({} as ChallengesContextData);\n\nexport const ChallengesProvider = ({ children }: ChallengesProviderProps) => {\n  const [level, setLevel] = useState(1);\n  const [experience, setExperience] = useState(0);\n  const [challengesCompleteds, setChallengesCompleteds] = useState(0);\n  const [activeChallenge, setActiveChallenge] = useState(null);\n\n  useEffect(() => {\n    Notification.requestPermission();\n  }, []);\n\n  const startNewChallenge = () => {\n    let newChallenge =\n      challenges[Math.floor(Math.random() * challenges.length)];\n    setActiveChallenge(newChallenge);\n    if (Notification.permission === \"granted\") {\n      new Notification(\"Novo desafio ðŸŽ‰\", {\n        body: `Valendo ${newChallenge.amount}XP!`,\n      });\n    }\n  };\n\n  const resetChallenge = () => {\n    setActiveChallenge(null);\n  };\n\n  const completeChallenge = () => {\n    if (!activeChallenge) return;\n    const { amount } = activeChallenge;\n    let xp = experience + amount;\n    if (xp >= experienceToLevelUp) {\n      setLevel(level + 1);\n      xp = xp - experienceToLevelUp;\n    }\n    setExperience(xp);\n    setActiveChallenge(null);\n    setChallengesCompleteds(challengesCompleteds + 1);\n  };\n\n  const experienceToLevelUp = Math.pow((level + 1) * 4, 2);\n\n  return (\n    <ChallengesContext.Provider\n      value={{\n        level,\n        experience,\n        activeChallenge,\n        challengesCompleteds,\n        levelUp: () => setLevel(level + 1),\n        startNewChallenge,\n        resetChallenge,\n        experienceToLevelUp,\n        completeChallenge,\n      }}\n    >\n      {children}\n    </ChallengesContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}