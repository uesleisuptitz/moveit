{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/uesleisuptitz/projetos/nlw4/moveit/src/context/challenges.context.tsx\";\nimport { useState, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport challenges from \"../challenges.json\";\nexport const ChallengesContext = /*#__PURE__*/createContext({});\nexport const ChallengesProvider = ({\n  children\n}) => {\n  const {\n    0: level,\n    1: setLevel\n  } = useState(1);\n  const {\n    0: experience,\n    1: setExperience\n  } = useState(0);\n  const {\n    0: challengesCompleteds,\n    1: setChallengesCompleteds\n  } = useState(0);\n  const {\n    0: activeChallenge,\n    1: setActiveChallenge\n  } = useState(null);\n  useEffect(() => Notification.requestPermission(), []);\n\n  const startNewChallenge = () => {\n    let newChallenge = challenges[Math.floor(Math.random() * challenges.length)];\n    setActiveChallenge(newChallenge);\n  };\n\n  const resetChallenge = () => {\n    setActiveChallenge(null);\n  };\n\n  const completeChallenge = () => {\n    if (!activeChallenge) return;\n    const {\n      amount\n    } = activeChallenge;\n    let xp = experience + amount;\n\n    if (xp >= experienceToLevelUp) {\n      setLevel(level + 1);\n      xp = xp - experienceToLevelUp;\n    }\n\n    setExperience(xp);\n    setActiveChallenge(null);\n    setChallengesCompleteds(challengesCompleteds + 1);\n  };\n\n  const experienceToLevelUp = Math.pow((level + 1) * 4, 2);\n  return /*#__PURE__*/_jsxDEV(ChallengesContext.Provider, {\n    value: {\n      level,\n      experience,\n      activeChallenge,\n      challengesCompleteds,\n      levelUp: () => setLevel(level + 1),\n      startNewChallenge,\n      resetChallenge,\n      experienceToLevelUp,\n      completeChallenge\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"sources":["/Users/uesleisuptitz/projetos/nlw4/moveit/src/context/challenges.context.tsx"],"names":["useState","useEffect","createContext","challenges","ChallengesContext","ChallengesProvider","children","level","setLevel","experience","setExperience","challengesCompleteds","setChallengesCompleteds","activeChallenge","setActiveChallenge","Notification","requestPermission","startNewChallenge","newChallenge","Math","floor","random","length","resetChallenge","completeChallenge","amount","xp","experienceToLevelUp","pow","levelUp"],"mappings":";;AAAA,SAASA,QAAT,EAA8BC,SAA9B,QAA+C,OAA/C;AACA,SAASC,aAAT,QAA8B,OAA9B;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AAsBA,OAAO,MAAMC,iBAAiB,gBAAGF,aAAa,CAAC,EAAD,CAAvC;AAEP,OAAO,MAAMG,kBAAkB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAA2C;AAC3E,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBR,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAM;AAAA,OAACS,UAAD;AAAA,OAAaC;AAAb,MAA8BV,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM;AAAA,OAACW,oBAAD;AAAA,OAAuBC;AAAvB,MAAkDZ,QAAQ,CAAC,CAAD,CAAhE;AACA,QAAM;AAAA,OAACa,eAAD;AAAA,OAAkBC;AAAlB,MAAwCd,QAAQ,CAAC,IAAD,CAAtD;AAEAC,EAAAA,SAAS,CAAC,MAAMc,YAAY,CAACC,iBAAb,EAAP,EAAyC,EAAzC,CAAT;;AAEA,QAAMC,iBAAiB,GAAG,MAAM;AAC9B,QAAIC,YAAY,GACdf,UAAU,CAACgB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBlB,UAAU,CAACmB,MAAtC,CAAD,CADZ;AAEAR,IAAAA,kBAAkB,CAACI,YAAD,CAAlB;AACD,GAJD;;AAMA,QAAMK,cAAc,GAAG,MAAM;AAC3BT,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD,GAFD;;AAIA,QAAMU,iBAAiB,GAAG,MAAM;AAC9B,QAAI,CAACX,eAAL,EAAsB;AACtB,UAAM;AAAEY,MAAAA;AAAF,QAAaZ,eAAnB;AACA,QAAIa,EAAE,GAAGjB,UAAU,GAAGgB,MAAtB;;AACA,QAAIC,EAAE,IAAIC,mBAAV,EAA+B;AAC7BnB,MAAAA,QAAQ,CAACD,KAAK,GAAG,CAAT,CAAR;AACAmB,MAAAA,EAAE,GAAGA,EAAE,GAAGC,mBAAV;AACD;;AACDjB,IAAAA,aAAa,CAACgB,EAAD,CAAb;AACAZ,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAF,IAAAA,uBAAuB,CAACD,oBAAoB,GAAG,CAAxB,CAAvB;AACD,GAXD;;AAaA,QAAMgB,mBAAmB,GAAGR,IAAI,CAACS,GAAL,CAAS,CAACrB,KAAK,GAAG,CAAT,IAAc,CAAvB,EAA0B,CAA1B,CAA5B;AAEA,sBACE,QAAC,iBAAD,CAAmB,QAAnB;AACE,IAAA,KAAK,EAAE;AACLA,MAAAA,KADK;AAELE,MAAAA,UAFK;AAGLI,MAAAA,eAHK;AAILF,MAAAA,oBAJK;AAKLkB,MAAAA,OAAO,EAAE,MAAMrB,QAAQ,CAACD,KAAK,GAAG,CAAT,CALlB;AAMLU,MAAAA,iBANK;AAOLM,MAAAA,cAPK;AAQLI,MAAAA,mBARK;AASLH,MAAAA;AATK,KADT;AAAA,cAaGlB;AAbH;AAAA;AAAA;AAAA;AAAA,UADF;AAiBD,CAlDM","sourcesContent":["import { useState, ReactNode, useEffect } from \"react\";\nimport { createContext } from \"react\";\nimport challenges from \"../challenges.json\";\n\ninterface ChallengesProviderProps {\n  children: ReactNode;\n}\ninterface Challenge {\n  type: \"body\" | \"eye\";\n  description: string;\n  amount: number;\n}\ninterface ChallengesContextData {\n  level: number;\n  experience: number;\n  activeChallenge: Challenge;\n  challengesCompleteds: number;\n  levelUp: () => void;\n  startNewChallenge: () => void;\n  resetChallenge: () => void;\n  completeChallenge: () => void;\n  experienceToLevelUp: number;\n}\n\nexport const ChallengesContext = createContext({} as ChallengesContextData);\n\nexport const ChallengesProvider = ({ children }: ChallengesProviderProps) => {\n  const [level, setLevel] = useState(1);\n  const [experience, setExperience] = useState(0);\n  const [challengesCompleteds, setChallengesCompleteds] = useState(0);\n  const [activeChallenge, setActiveChallenge] = useState(null);\n\n  useEffect(() => Notification.requestPermission(), []);\n\n  const startNewChallenge = () => {\n    let newChallenge =\n      challenges[Math.floor(Math.random() * challenges.length)];\n    setActiveChallenge(newChallenge);\n  };\n\n  const resetChallenge = () => {\n    setActiveChallenge(null);\n  };\n\n  const completeChallenge = () => {\n    if (!activeChallenge) return;\n    const { amount } = activeChallenge;\n    let xp = experience + amount;\n    if (xp >= experienceToLevelUp) {\n      setLevel(level + 1);\n      xp = xp - experienceToLevelUp;\n    }\n    setExperience(xp);\n    setActiveChallenge(null);\n    setChallengesCompleteds(challengesCompleteds + 1);\n  };\n\n  const experienceToLevelUp = Math.pow((level + 1) * 4, 2);\n\n  return (\n    <ChallengesContext.Provider\n      value={{\n        level,\n        experience,\n        activeChallenge,\n        challengesCompleteds,\n        levelUp: () => setLevel(level + 1),\n        startNewChallenge,\n        resetChallenge,\n        experienceToLevelUp,\n        completeChallenge,\n      }}\n    >\n      {children}\n    </ChallengesContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}